# 后台开发面试问题总结
[简书|后台开发面试问题总结](https://www.jianshu.com/p/7bab37d411a8)

1. 析构函数原理以及步骤  
    - 析构函数的作用：当对象的生命周期结束时，会自动调用析构函数，以清理一些资源，比如释放内存、关闭文件、关闭数据库连接等。
    - 析构函数的顺序：析构函数析构顺序和构造函数构造对象顺序相反，是从派生类开始往基类进去一步步析构。所以，如果在有继承的类对象里，且有虚函数的存在，那么析构函数一定是虚函数。因为如果析构函数不是虚函数，那么基类指针对象调用的析构函数就仅仅是基类析构。而不释放派生类部分的对象，会导致内存泄漏。（因为析构时，编译器已经知道了对象的构造，已经拥有VPTR，所以可以是虚函数。但构造函数明显还不知道，所以不能是虚函数。）  

2. 类对象的内存存储形式  
    - 如果是一个普通的类的对象，那么会在堆（用new）或者栈（函数内创建局部变量）中直接分配类里声明的成员变量空间，并对这些成员变量调用构造进行初始化存储。
    - 成员函数则会有一个ptr指向类代码区，并不会占用堆栈空间。每次a->func()调用成员函数的时候，会根据指针直接去代码区找到函数运行。
    - 如果类拥有虚函数，则对象内存一开始会有一个VPTR，指向该类的虚函数表，实现虚函数的晚捆绑。  
    - 如果该类有多重继承，且上层具有虚继承，则该对象除上面所说以外，还有一个vbptr，该指针指向虚基类表，表中存储了基类成员和自己的偏移量。这种多重继承，只拷贝一份基类成员，但是多一个指针的开销。

3. 进程内存空间分布
    - ![进程内存分布图](http://ww1.sinaimg.cn/large/005xfSxkly1g1031fgnspg30bo09xaac.gif)
4. 虚函数的作用
    -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
